2.3  编译源代码 
Node.js 从 0.6  版本开始已经实现了源代码级别的跨平台，因此我们可以使用不同的编译
命令将同一份源代码的基础上编译为不同平台下的原生可执行代码。 
在编译之前，要先获取源码包。我们建议访问http://nodejs.org ，点击 Download链接，然
后选择Source Code，下载正式发布的源码包。如果你需要开发中的版本，可以通过 
https://github.com/joyent/node/zipball/master  获得，或者在命令行下输入git clone git: 
//github.com/joyent/node.git   从git获得最新的分支。 
2.3.1 在 POSIX  系统中编译 
在 POSIX  系统中编译 Node.js  需要三个工具： 
   C++ 编译器 gcc  或 clang/LLVM ；  
   Python 版本 2.5  以上，不支持 Python 3 ；  
   libssl-dev 提供 SSL/TLS  加密支持。 
如果你使用 Linux ，那么你需要使用 g++  来编译 Node.js 。在 Debian/Ubuntu  中，你可以
通过  apt-get install g++ 命令安装g++ 。在 Fedora/Redhat/CentOS  中，你可以使用 yum 
install gcc-c++   安装。 
如果使用的是 Mac OS X ，那么需要安装  Xcode 。默认情况下，系统安装盘中会有 Xcode ，
可以从光盘中安装，或者访问 https://developer.apple.com/xcode/  下载最新的版本。 
Mac OS X  和几乎所有的 Linux 发行版都内置了 Python，你可以在终端机输入命令 
python --version  检查 Python  的版本，可能会显示  Python 2.7.2   或其他版本。如果你
发现版本号小于2.5或者直接出现了  command not found，那么你需要通过软件包管理器
获得一个新版本的 Python，或者到 http://python.org/  下载一个。 
libssl-dev  是调用 OpenSSL  编译所需的头文件，用于提供 SSL/TLS 加密支持。Mac OS 
X  的 Xcode 内置了  libssl-dev 。在 Debian/Ubuntu  中，你可以通过  apt-get install 
libssl-dev  命令安装。在 Fedora/Redhat/CentOS 中，你可以通过 yum install 
openssl-devel 命令安装。同样，你也可以访问 http://openssl.org/  下载一个。 
接下来，进入 Node.js  源代码所在目录，运行： 
./configure 
make 
sudo make install 
18  第 2 章  安装和配置Node.js 
 
之后大约等待20分钟，Node.js 就安装完成了，而且附带安装了 npm。 
如果你使用 Mac OS X ，还可以尝试使用  homebrew  编译安装 Node.js 。首先在  http://mxcl. 
github.com/homebrew/ 获取 homebrew ，然后通过以下命令即可自动解析编译依赖并安装Node.js ： 
brew install node 
2.3.2 在 Windows 系统中编译 
Node.js 在 Windows 下只能通过 Microsoft Visual Studio  编译，因此你需要首先安装 Visual 
Studio  或者免费的 Visual Studio Express 。你还需要安装 Python 2 （2.5以上的版本，但要小于
3.0），可以在http://python.org/取得。安装完 Python  以后请确保在PATH环境变量中添加 
python.exe  所在的目录，如果没有则需要手动在“系统属性”中添加。 
一切准备好以后，打开命令提示符，进入 Node.js  源代码所在的目录进行编译： 
C:\Users\byvoid\node-v0.6.12>vcbuild.bat release 
['-f', 'msvs', '-G', 'msvs_version=2010', '.\\node.gyp', '-I', '.\\common.gypi', '--depth=.', 
  '-Dtarget_Project files generated. 
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(1151,5): 
  warning MSB8012: http_parser.vcxproj -> C:\Users\byvoid\node-v0.6.12\ 
  Release\http_parser.lib 
  js2c, and also js2c_experimental 
  node_js2c 
...  
大约等待20分钟，编译完成。在 Release  子目录下面会有一个 node.exe 文件，这就是我
们编译的唯一目标。也许有些令人惊讶，Node.js 编译后只有一个 node.exe 文件，这说明 Node.js 
的核心非常小巧精悍。直接运行 node.exe 即可进入 Node.js  的交互模式，在系统  PATH  环境
变量中添加node.exe 文件所在的目录，这样就可以在命令行中运行  node  命令了，剩下的工
作就是手动安装 npm  了。